<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Language Reference - GB.HLA</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/fontawesome.min.css" rel="stylesheet">
        <link href="../css/brands.min.css" rel="stylesheet">
        <link href="../css/solid.min.css" rel="stylesheet">
        <link href="../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">GB.HLA</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href=".." class="nav-link">Welcome</a>
                            </li>
                            <li class="nav-item">
                                <a href="../getting-started/" class="nav-link">Getting Started</a>
                            </li>
                            <li class="nav-item">
                                <a href="./" class="nav-link active" aria-current="page">Language Reference</a>
                            </li>
                            <li class="nav-item">
                                <a href="../macros/" class="nav-link">Macros</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../getting-started/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../macros/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="https://github.com/daid/GB.HLA/edit/master/docs/language.md" class="nav-link"><i class="fa-brands fa-github"></i> Edit on GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#language-reference" class="nav-link">Language Reference</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#macro" class="nav-link">#MACRO</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#fmacro" class="nav-link">#FMACRO</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#include" class="nav-link">#INCLUDE</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#incbin" class="nav-link">#INCBIN</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#incgfx" class="nav-link">#INCGFX</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#section" class="nav-link">#SECTION</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#layout" class="nav-link">#LAYOUT</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#assert" class="nav-link">#ASSERT</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#print" class="nav-link">#PRINT</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#if" class="nav-link">#IF</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#for" class="nav-link">#FOR</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#push-pop" class="nav-link">#PUSH / #POP</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#other" class="nav-link">Other</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#ds-db-dw" class="nav-link">ds, db, dw</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#assignment" class="nav-link">assignment</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#labels" class="nav-link">Labels</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#builtin-functions" class="nav-link">Builtin functions</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#bank" class="nav-link">BANK(...)</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#strlen" class="nav-link">strlen(...)</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#bit_length" class="nav-link">bit_length(...)</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#bank_max" class="nav-link">bank_max(...)</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#checksum" class="nav-link">checksum(...)</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="language-reference">Language Reference</h1>
<p>Statements in GB.HLA in general are on a line. Comments are defined starting with a semicolon: <code>;</code> and can be on their own line or after a statement. Whitespace before or after a statement is ignored.
Example:</p>
<pre><code class="language-asm">statement ; comment
; comment
    statement
</code></pre>
<blockquote>
<p>NOTE: GB.HLA supports all the Game Boy assembly instructions in <code>gbz80/instr.asm</code>. There are not documented here, but a reference can be found at <a href="https://rgbds.gbdev.io/docs/v0.9.4/gbz80.7">RGBDS</a></p>
</blockquote>
<h2 id="macro">#MACRO</h2>
<p>Macros are complex enough that they require their own <a href="../macros/">page</a></p>
<h2 id="fmacro">#FMACRO</h2>
<p>FMacros are function macros. These allow macros inside statements in the form of functions. The definition syntaxs is the same as basic <a href="../macros/">macros</a>.</p>
<h3 id="example">Example:</h3>
<pre><code class="language-asm">#FMACRO add2 _n { (_n + 2) }

db add2(2) ; this will put 4 in the ROM
</code></pre>
<h2 id="include">#INCLUDE</h2>
<p>Reads and fully parses the given file. This allows for splitting your project into multiple files and also to include libraries into your project.</p>
<h3 id="example_1">Example:</h3>
<pre><code class="language-asm">#INCLUDE &quot;gbz80/all.asm&quot; ; include default set of gbz80 ASM instructions
#INCLUDE &quot;mylib/rand.asm&quot; ; include a file from your project
</code></pre>
<h2 id="incbin">#INCBIN</h2>
<p>Directly import a binary file. Usually the binary file is generated with an external tool. Example:</p>
<pre><code class="language-asm">#INCBIN &quot;file.bin&quot;
</code></pre>
<h2 id="incgfx">#INCGFX</h2>
<p>The <code>#INCGFX</code> directive allows you to include a graphics file converted to Game Boy format directly into the ROM.</p>
<p>The <code>#INCGFX</code> directive expects a filename as first parameter, and <code>KEY[VALUE]</code> parameters after this. The parameters influence how the graphics are imported:</p>
<ul>
<li><code>TILEHEIGHT[8]</code>, <code>TILEHEIGHT[16]</code>. The 8 pixel height tiles are the default. This imports each 8x8 tile in the file, from the left to the right then top to bottom. With a height of 16, these tiles are 8x16 pixels. Which are generally used for OAM sprites.</li>
<li><code>COLORMAP[a, b, c, d]</code>. Setup which 4 colors to use for the 4 gameboy colors. Each pixel in the file is mapped to closest of these 4 colors.</li>
<li><code>RANGE[start, end]</code>. Only store tiles from start (inclusive) to end (exclusive). This allows a single image to be used for multiple blocks of data in the ROM.</li>
<li><code>UNIQUE</code>. Remove all duplicate tiles from the graphics. This you would generally combine with a 2nd <code>#INCGFX</code> that uses <code>TILEMAP</code>.</li>
<li><code>TILEMAP</code>. Automatically selects <code>UNIQUE</code> but adds a list of bytes that all refer to a line generated by the <code>UNIQUE</code> set.</li>
<li><code>DEBUG</code>. Output the found colors in the image and how they map to each of the Game Boy colors, useful to debug <code>COLORMAP</code> issues.</li>
</ul>
<h3 id="example_2">Example:</h3>
<pre><code class="language-asm">    #INCGFX &quot;grayscale.png&quot;
sprites:
    #INCGFX &quot;sprites.png&quot;, TILEHEIGHT[16], COLORMAP[$FF00FF, $000000, $808080, $FFFFFF]
titleScreenGraphics:
    #INCGFX &quot;titlescreen.png&quot;, UNIQUE
titleScreenTiles:
    #INCGFX &quot;titlescreen.png&quot;, TILEMAP
</code></pre>
<h2 id="section">#SECTION</h2>
<p>Create a section of code/data. You use this to define where code/data is located. And follows the following syntax: <code>#SECTION "name", LAYOUT_NAME[address], BANK[number] {</code>. Sections need to be closed with <code>}</code> but can be nested. The <code>address</code> and <code>BANK[...]</code> are optional.</p>
<h3 id="example_3">Example:</h3>
<pre><code class="language-asm">#SECTION &quot;Free standing section&quot;, ROMX {
    db &quot;This can be placed anywhere in rom except for bank 0.&quot;
}
#SECTION &quot;Fixed address&quot;, ROMX[$4000] {
    db &quot;This section can be in any bank, but is forced on the first address of the bank.&quot;
}
#SECTION &quot;Fixed bank&quot;, ROMX, BANK[4] {
    db &quot;This section can be placed anywhere in bank 4.&quot;
}
</code></pre>
<h2 id="layout">#LAYOUT</h2>
<p>The <code>#LAYOUT</code> directive is used to define the layout of the ROM and memory map of the Game Boy. You generally do not need to bother where these, as they are defined in <code>gbz80/layout.asm</code>. If you have some custom cardridge that requires specialized this is where you want to look.</p>
<h2 id="assert">#ASSERT</h2>
<p>The <code>#ASSERT</code> directive allows you to check if a condition is true and else abort the build with a message. Multiple conditions can be checked at the same time with the same message.</p>
<h3 id="example_4">Example:</h3>
<pre><code class="language-asm">#ASSERT var == 1, &quot;var needs to be 1&quot;
#ASSERT var &gt; 0, var &lt; 10, &quot;var needs to be between 1 and 9 (inclusive)&quot;
</code></pre>
<h2 id="print">#PRINT</h2>
<p>The <code>#PRINT</code> directive allows you to output a value during the assembly process. Useful for debugging the assembly process.</p>
<h3 id="example_5">Example:</h3>
<pre><code class="language-asm">#PRINT &quot;We can print strings&quot;, 303 ; or numbers
</code></pre>
<h2 id="if">#IF</h2>
<p>The <code>#IF</code> directive is used to conditionally enable/disable parts of the code.</p>
<h3 id="example_6">Example:</h3>
<pre><code class="language-asm">#IF var {
    db &quot;This is only added to the ROM if var is not 0&quot;
}
</code></pre>
<h2 id="for">#FOR</h2>
<p>The <code>#FOR</code> directive allows you to repeat a certain bit of code multiple times. It expects 3 parameters. A variable name, a start value and an end value. The start is inclusive, the end is exclusive.</p>
<h3 id="example_7">Example:</h3>
<pre><code class="language-asm">#FOR var, 1, 10 {
    db var ; this will add $01, $02, $03, $04, $05, $06, $07, $08, $09
}
</code></pre>
<h2 id="push-pop">#PUSH / #POP</h2>
<p>The <code>#PUSH</code> and <code>#POP</code> directives are used to push and pop values on a stack during assembly. This is especially useful for nested macros.</p>
<h1 id="other">Other</h1>
<h2 id="ds-db-dw">ds, db, dw</h2>
<p>The <code>ds</code> statement expects a number behind it and adds that amount of zeros to the RAM. Or if it's RAM allocates that amount of memory in RAM.</p>
<p>The <code>db</code> statement adds bytes to the ROM.</p>
<p>The <code>dw</code> statement adds words (16bit) values to the ROM in little endian order.</p>
<h2 id="assignment">assignment</h2>
<p>At any time during assemble, the statement <code>variable = value</code> can be used to change a assembly time variable into a different one.</p>
<h1 id="labels">Labels</h1>
<p>Labels are defined with <code>identifier:</code>. There are 3 types of labels in the code:
* General labels, any label that isn't one of the others fall in this category.
* Local labels, these start with a <code>.</code> and are expanded into a full label form of <code>previous_general_label.this_label</code>.
* Non-scoped labels. These labels won't start a new local scope for local labels, and are useful for macros. These labels start with a double underscore: <code>__</code></p>
<h1 id="builtin-functions">Builtin functions</h1>
<p>There are a few builtin functions that provide functionality that cannot be achieved with just macros.</p>
<h2 id="bank">BANK(...)</h2>
<p>Returns the bank of the specified label.</p>
<h2 id="strlen">strlen(...)</h2>
<p>Returns the length of the given string.</p>
<h2 id="bit_length">bit_length(...)</h2>
<p>Returns the number of bits needed to represent the number. Also known as the highest set bit.</p>
<h2 id="bank_max">bank_max(...)</h2>
<p>Returns the highest bank number of the specified layout name. This is used to generate the GB rom header to specifiy the number of ROM/RAM banks but can be useful for other purposes.</p>
<h2 id="checksum">checksum(...)</h2>
<p>Is used to calculate a checksum, this is done after a complete ROM build. Without parameters (<code>checksum()</code>) it calculates a checksum over the whole rom. With parameters it specifies the begin (inclusive) and end (exclusive) range of the checksum calculation, in bytes of the final ROM file (<code>checksum($100, $150)</code>)</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js"></script>
        <script src="../js/extra.js"></script>
        <script src="../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
